#!/usr/bin/env python3

import xml.etree.ElementTree as ET
import urllib.request
import fileinput
import glob

vimeo_id = input('What is the Vimeo ID? ')
vimeo_date = input('What is the date for this sermon? ')

files = glob.glob(f'/home/wadeallen/Sites/fbcmuncie_2018/_posts/{vimeo_date}*.md')
for filename in files:
	filename = filename

with fileinput.FileInput(filename, inplace=True) as file:
    for line in file:
        print(line.replace("vimeo:", f"vimeo: {vimeo_id}"), end='')

url = f'http://vimeo.com/api/v2/video/{vimeo_id}.xml'
response = urllib.request.urlopen(url).read()
tree = ET.fromstring(response)

for thumb in tree.iter('thumbnail_large'):
	urllib.request.urlretrieve(thumb.text, f"/home/wadeallen/Sites/fbcmuncie_2018/images/vimeo/{vimeo_date}.jpg")



